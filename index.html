<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Slime Snake</title>
<style>
  body {
    margin: 0;
    overflow: hidden;
    background-color: #f0f0f0;
  }
  canvas {
    display: block;
    margin: auto;
    background-color: #ffffff;
  }
</style>
</head>
<body>
<canvas id="gameCanvas" width="600" height="400"></canvas>
<script>
  const canvas = document.getElementById('gameCanvas');
  const ctx = canvas.getContext('2d');

  const cellSize = 20;
  const gridSizeX = Math.floor(canvas.width / cellSize);
  const gridSizeY = Math.floor(canvas.height / cellSize);

  let snake = [{x: 10, y: 10}];
  let dx = 1;
  let dy = 0;
  let slimeTrail = [];

  function drawSlimeTrail() {
    ctx.fillStyle = 'lime';
    for (const cell of slimeTrail) {
      ctx.fillRect(cell.x * cellSize, cell.y * cellSize, cellSize, cellSize);
    }
  }

  function drawSnake() {
    ctx.fillStyle = 'green';
    for (const segment of snake) {
      ctx.fillRect(segment.x * cellSize, segment.y * cellSize, cellSize, cellSize);
    }
  }

  function moveSnake() {
    const head = {x: snake[0].x + dx, y: snake[0].y + dy};
    if (head.x < 0 || head.x >= gridSizeX || head.y < 0 || head.y >= gridSizeY) {
      // Snake hits the wall, wrap around or climb up
      // For now, let's just wrap around
      if (head.x < 0) head.x = gridSizeX - 1;
      if (head.x >= gridSizeX) head.x = 0;
      if (head.y < 0) head.y = gridSizeY - 1;
      if (head.y >= gridSizeY) head.y = 0;
    }

    // Check if snake hits itself
    if (snake.some(segment => segment.x === head.x && segment.y === head.y)) {
      // Game over
      alert('Game over!');
      location.reload();
    }

    snake.unshift(head);

    if (slimeTrail.length > snake.length) {
      slimeTrail.pop();
    }

    // Check if the snake is touching a wall
    if ((head.x === 0 || head.x === gridSizeX - 1) && snake.length > 1) {
      // Snake is touching a wall, enable wall climbing
      // Let's assume the snake can climb up walls indefinitely for simplicity
      dy = 0; // Disable vertical movement
      if (head.x === 0) {
        // Snake is touching left wall, move right
        dx = 1;
      } else {
        // Snake is touching right wall, move left
        dx = -1;
      }
    }

    // Update slime trail
    slimeTrail.unshift({x: head.x, y: head.y});

    // Draw everything
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    drawSlimeTrail();
    drawSnake();
  }

  function gameLoop() {
    moveSnake();
    requestAnimationFrame(gameLoop);
  }

  // Control snake movement with arrow keys
  document.addEventListener('keydown', e => {
    switch (e.key) {
      case 'ArrowUp':
        if (dy === 0) {
          dx = 0;
          dy = -1;
        }
        break;
      case 'ArrowDown':
        if (dy === 0) {
          dx = 0;
          dy = 1;
        }
        break;
      case 'ArrowLeft':
        if (dx === 0) {
          dx = -1;
          dy = 0;
        }
        break;
      case 'ArrowRight':
        if (dx === 0) {
          dx = 1;
          dy = 0;
        }
        break;
    }
  });

  gameLoop();
</script>
</body>
</html>
